#!/bin/bash -e

declare -A output_map

npaths=(100 200 300)

output_map['_']=''

for npath in "${npaths[@]}"; do
    output_map['_']+="$npath,"
    while read -r key price _ stderr; do
        output_map["$key"]+="$price,"
        output_map["${key}_stderr"]+="$stderr,"
    done < <(./ACP_assignment "$npath")
done

{
for k in "${!output_map[@]}"; do
    printf '%s,%s\n' "$k" "${output_map["$k"]%,}"
done
} | LC_ALL=C sort
